<template>
  <div class="wrapper wrapper-content animated fadeInRight">
    <div class="row" v-for="(item, index) in wellList">
      <div class="col-lg-12">
        <div class="ibox float-e-margins">
          <div class="ibox-title">
            <h5>区块 {{}}</h5>
          </div>
          <div class="ibox-content">
            <el-table :data="wellList[index]" border style="width: 100%">
              <el-table-column label="油井编号" width="180"></el-table-column>
              <el-table-column label="油井名称" width="180"></el-table-column>
              <el-table-column label="油井状态" width="180"></el-table-column>
              <el-table-column label="监控链接">
                <template scope="scope">
                  <el-button
                    size="small"
                    @click="handleEdit(scope.$index, scope.row)">云监控
                  </el-button>
                  <el-button
                    size="small"
                    type="danger"
                    @click="handleDelete(scope.$index, scope.row)">现场
                  </el-button>
                </template>
              </el-table-column>
            </el-table>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
  import API from '../../../config/request'
  export default {
    data () {
      return {
        wellList: []
      }
    },
    mounted () {
      this.getwellList();
    },
    methods: {
      getwellList () {
          let that = this;
        this.$http.get(API.wellInfo).then(
          function (res) {
            if (res.data.status === '0') {
              let temp = res.data.data;
              let arr = [];
              for (let i = 0; i < temp.length; i++) {
                if (i === 0) {
                  arr = [];
                  arr.push(temp[i]);
                } else if (i !== 0 && temp[i].BLOCK_ID !== temp[i - 1].BLOCK_ID) {
                    console.log(arr)
                  that.wellList.push(arr);
                  arr = [];
                  arr.push(temp[i]);
                }else if(temp[i].BLOCK_ID === temp[i - 1].BLOCK_ID){
                  arr.push(temp[i]);
                }
              }
              console.log(that.wellList)
            }
          });
      }
    }
  }
</script>

<style lang="less" rel="stylesheet/less">

</style>
